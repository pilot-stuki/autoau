# AutoAU Service Architecture

Оптимизированная архитектура для приложения AutoAU, предназначенного для авторизации пользователей на сайте и управления переключателем с минимальным использованием ресурсов.

## Ключевые сервисы

### Resource Management Service
- **Назначение**: Мониторинг и управление системными ресурсами
- **Расположение**: `resource_manager.py`
- **Оптимизированные обязанности**:
  - Отслеживание использования CPU и памяти
  - Оптимизация количества процессов для работы на Github Codespace
  - Адаптивные тайм-ауты в зависимости от нагрузки
  - Предупреждение о критическом использовании ресурсов
  - Автоматическая очистка ресурсов

### Browser Management Service
- **Назначение**: Управление браузерами и драйверами
- **Расположение**: `browser_service.py`
- **Оптимизированные обязанности**:
  - Создание оптимизированных экземпляров браузера
  - Конфигурация браузера для минимального использования ресурсов
  - Эффективное управление пулом драйверов
  - Очистка процессов Chrome
  - Обнаружение и закрытие зависших браузеров

### Session Management Service
- **Назначение**: Управление сессиями пользователей
- **Расположение**: `session_service.py`
- **Оптимизированные обязанности**:
  - Сохранение и восстановление сессий для минимизации повторных авторизаций
  - Проверка работоспособности сессий
  - Интеллектуальное управление сроком действия сессий
  - Распределение сессий для оптимальной нагрузки

### Error Handling Service
- **Назначение**: Стандартизированная обработка ошибок
- **Расположение**: `error_service.py`
- **Оптимизированные обязанности**:
  - Классификация ошибок для минимизации перезапусков
  - Адаптивные механизмы повторных попыток
  - Стандартизированная обработка тайм-аутов
  - Интеллектуальное восстановление после сбоев

### Automation Service
- **Назначение**: Основная логика автоматизации
- **Расположение**: `automation_service.py`
- **Обязанности**:
  - Авторизация на сайте
  - Управление переключателем
  - Проверка состояния переключателя
  - Логика обработки действий на сайте

## Координаторы

### Main Application
- **Назначение**: Точка входа для прямого запуска
- **Расположение**: `main.py`
- **Оптимизированные обязанности**:
  - Управление списком пользователей
  - Инициализация минимального набора сервисов
  - Периодическая проверка переключателя
  - Распараллеливание задач с учетом ограничений ресурсов
  - Режим экономии ресурсов для Github Codespace

### Service Wrapper
- **Назначение**: Интерфейс для взаимодействия с сервисами
- **Расположение**: `service_wrapper.py`
- **Оптимизированные обязанности**:
  - Легковесный интерфейс для сервисов
  - Координация между сервисами для минимизации дублирования
  - Управление длительно выполняющимися процессами
  - Оптимизация использования памяти

## Конфигурация для Github Codespace

### Ограничения ресурсов
- Автоматическое обнаружение ограничений окружения
- Настройка пулов и тайм-аутов в зависимости от доступных ресурсов
- Последовательное выполнение для экономии памяти
- Оптимизация использования Chrome для минимизации нагрузки

### Оптимизации
- Опция безголового режима для Chrome
- Автоматическая утилизация неиспользуемых браузеров
- Интеллектуальные интервалы проверки переключателя
- Экономный режим при достижении порогов памяти